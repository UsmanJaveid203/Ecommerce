{"ast":null,"code":"var _jsxFileName = \"E:\\\\Projects\\\\Ecommerce\\\\pages\\\\Profilee\\\\index.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport Sidebar from '../components/SideMenu';\nimport { useRouter } from 'next/router';\nimport Profilee from '../components/Profiles component/profilee';\nimport Head from 'next/head';\nexport var __N_SSP = true;\nexport default function profilee(_ref) {\n  _s();\n\n  var token = _ref.token,\n      data = _ref.data,\n      user_id = _ref.user_id;\n  var router = useRouter();\n\n  var DeleteHandler = function DeleteHandler() {\n    fetch(\"http://localhost:3000/api/user/delteData/\".concat(user_id), {\n      method: 'DELETE',\n      headers: {\n        'Authorization': \"Bearer \".concat(token)\n      }\n    }).then(function (res) {\n      return res.json();\n    }).then(function (data) {\n      router.push('/');\n      cookie.remove('token');\n    })[\"catch\"](function (err) {\n      console.log(err);\n    });\n  };\n\n  return __jsx(React.Fragment, null, __jsx(Head, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 13\n    }\n  }, __jsx(\"title\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 17\n    }\n  }, \"Profile\")), __jsx(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 13\n    }\n  }, __jsx(Sidebar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 17\n    }\n  }), __jsx(Profilee, {\n    data: data,\n    token: token,\n    user_id: user_id,\n    DeleteHandler: DeleteHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 17\n    }\n  })));\n}\n\n_s(profilee, \"fN7XvhJ+p5oE6+Xlo0NJmXpxjC8=\", false, function () {\n  return [useRouter];\n});","map":{"version":3,"sources":["E:/Projects/Ecommerce/pages/Profilee/index.js"],"names":["Sidebar","useRouter","Profilee","Head","profilee","token","data","user_id","router","DeleteHandler","fetch","method","headers","then","res","json","push","cookie","remove","err","console","log"],"mappings":";;;;;AAEA,OAAOA,OAAP,MAAoB,wBAApB;AACA,SAASC,SAAT,QAA0B,aAA1B;AACA,OAAOC,QAAP,MAAqB,2CAArB;AACA,OAAOC,IAAP,MAAiB,WAAjB;;AAEA,eAAe,SAASC,QAAT,OAA4C;AAAA;;AAAA,MAAxBC,KAAwB,QAAxBA,KAAwB;AAAA,MAAjBC,IAAiB,QAAjBA,IAAiB;AAAA,MAAXC,OAAW,QAAXA,OAAW;AAEvD,MAAMC,MAAM,GAAGP,SAAS,EAAxB;;AAEA,MAAMQ,aAAa,GAAG,SAAhBA,aAAgB,GAAM;AAExBC,IAAAA,KAAK,oDAA6CH,OAA7C,GAAwD;AACzDI,MAAAA,MAAM,EAAE,QADiD;AAEzDC,MAAAA,OAAO,EAAE;AACL,0CAA2BP,KAA3B;AADK;AAFgD,KAAxD,CAAL,CAKGQ,IALH,CAKQ,UAAAC,GAAG;AAAA,aAAIA,GAAG,CAACC,IAAJ,EAAJ;AAAA,KALX,EAMKF,IANL,CAMU,UAAAP,IAAI,EAAI;AACVE,MAAAA,MAAM,CAACQ,IAAP,CAAY,GAAZ;AACAC,MAAAA,MAAM,CAACC,MAAP,CAAc,OAAd;AACH,KATL,WAUW,UAAAC,GAAG,EAAI;AACVC,MAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACH,KAZL;AAaH,GAfD;;AAkBA,SACI,4BACI,MAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADJ,CADJ,EAII;AAAK,IAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,MAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,EAEI,MAAC,QAAD;AAAU,IAAA,IAAI,EAAEb,IAAhB;AAAsB,IAAA,KAAK,EAAED,KAA7B;AAAoC,IAAA,OAAO,EAAEE,OAA7C;AAAsD,IAAA,aAAa,EAAEE,aAArE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFJ,CAJJ,CADJ;AAWH;;GAjCuBL,Q;UAELH,S","sourcesContent":["import { parseCookies } from 'nookies';\r\nimport jwt from 'jsonwebtoken';\r\nimport Sidebar from '../components/SideMenu';\r\nimport { useRouter } from 'next/router';\r\nimport Profilee from '../components/Profiles component/profilee';\r\nimport Head from 'next/head';\r\n\r\nexport default function profilee({ token, data, user_id }) {\r\n\r\n    const router = useRouter();\r\n\r\n    const DeleteHandler = () => {\r\n\r\n        fetch(`http://localhost:3000/api/user/delteData/${user_id}`, {\r\n            method: 'DELETE',\r\n            headers: {\r\n                'Authorization': `Bearer ${token}`\r\n            }\r\n        }).then(res => res.json())\r\n            .then(data => {\r\n                router.push('/')\r\n                cookie.remove('token')\r\n            })\r\n            .catch(err => {\r\n                console.log(err);\r\n            })\r\n    }\r\n\r\n\r\n    return (\r\n        <>\r\n            <Head>\r\n                <title>Profile</title>\r\n            </Head>\r\n            <div className=\"row\">\r\n                <Sidebar />\r\n                <Profilee data={data} token={token} user_id={user_id} DeleteHandler={DeleteHandler} />\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\n\r\nexport async function getServerSideProps(ctx) {\r\n    const { token } = parseCookies(ctx);\r\n    let user = jwt.decode(token);\r\n    let user_role = (user) ? user.u_role : \"\";\r\n    let user_id = (user) ? user.u_id : \"\";\r\n\r\n    if (!token || user_role === \"User\") {\r\n        const { res } = ctx\r\n        res.writeHead(302, { Location: \"/\" })\r\n        res.end()\r\n        return {\r\n            props: {}\r\n        }\r\n    } else {\r\n        let res = await fetch(`http://localhost:3000/api/user/getData/${user_id}`, {\r\n            headers: {\r\n                'Authorization': `Bearer ${token}`\r\n            }\r\n        })\r\n        let data = await res.json();\r\n        return {\r\n            props: { token, data, user_id }\r\n        }\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}