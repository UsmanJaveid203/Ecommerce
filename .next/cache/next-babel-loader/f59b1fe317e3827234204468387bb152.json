{"ast":null,"code":"import React from \"react\";\nvar __jsx = React.createElement;\nimport Sidebar from '../components/SideMenu';\nimport { parseCookies } from 'nookies';\nimport ProductCategory from '../components/CategoryMenu';\nimport Mypost from '../../public/styles/CategoryPro.module.css';\nimport jwt from 'jsonwebtoken';\nimport Link from 'next/link';\nimport Card from '@material-ui/core/Card';\nimport CardActionArea from '@material-ui/core/CardActionArea';\nimport CardActions from '@material-ui/core/CardActions';\nimport CardContent from '@material-ui/core/CardContent';\nimport Typography from '@material-ui/core/Typography';\nimport { useState } from 'react';\nimport Pagination from '../components/Pagination';\nimport Head from 'next/head';\n\nfunction index({\n  user_role,\n  token,\n  result,\n  user_id\n}) {\n  const [values, setValues] = new useState(null);\n\n  const changeValueHanler = number => {\n    fetch(`http://localhost:3000/api/product/get_data/${user_id}/${number}`, {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }).then(res => res.json()).then(data => {\n      setValues(data);\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n\n  let results = values == null ? result : values;\n\n  if (token) {\n    if (user_role === \"Admin\" || user_role === \"root\") {\n      var _results$data, _results$data2;\n\n      return __jsx(React.Fragment, null, __jsx(Head, null, __jsx(\"title\", null, \"Product\")), __jsx(\"div\", {\n        className: \"row\"\n      }, __jsx(Sidebar, null), __jsx(\"div\", {\n        className: `col-lg-9 col-12`\n      }, __jsx(ProductCategory, null), __jsx(\"div\", {\n        className: Mypost.shop_maindiv\n      }, (results === null || results === void 0 ? void 0 : (_results$data = results.data) === null || _results$data === void 0 ? void 0 : _results$data.length) !== 0 ? __jsx(React.Fragment, null, __jsx(\"div\", {\n        className: `row ${Mypost.card}`\n      }, results === null || results === void 0 ? void 0 : (_results$data2 = results.data) === null || _results$data2 === void 0 ? void 0 : _results$data2.map(value => {\n        return __jsx(Card, {\n          key: value._id,\n          className: ` mb-3 ${Mypost.shop_card}`\n        }, __jsx(CardActionArea, null, __jsx(\"div\", {\n          className: \"text-center\"\n        }, __jsx(\"img\", {\n          src: `/images/${value.p_image}`,\n          className: \"img-thumbnail\",\n          alt: \"category_photo\"\n        })), __jsx(CardContent, null, __jsx(Typography, {\n          gutterBottom: true,\n          variant: \"h5\",\n          component: \"h2\"\n        }, \"$\", value.p_name), __jsx(Typography, {\n          gutterBottom: true,\n          variant: \"h6\",\n          component: \"h2\"\n        }, `$${value.p_price}`))), __jsx(CardActions, {\n          className: Mypost.buton\n        }, __jsx(\"a\", {\n          className: Mypost.btn_link,\n          size: \"small\",\n          color: \"primary\"\n        }, \" Add to cart \", __jsx(\"i\", {\n          className: \"cart-box fas fa-shopping-cart\"\n        })), __jsx(Link, {\n          href: `/MyPost/${value._id}`\n        }, __jsx(\"a\", {\n          className: Mypost.btn_link,\n          size: \"small\",\n          color: \"primary\"\n        }, \" See About \", __jsx(\"i\", {\n          className: \"fas fa-arrow-right\"\n        })))));\n      })), __jsx(Pagination, {\n        result: results,\n        changeHandler: changeValueHanler\n      })) : __jsx(\"div\", {\n        className: Mypost.No_record_div\n      }, __jsx(\"h1\", null, \"Not found any product\"))))));\n    }\n  }\n}\n\nexport default index;\nexport async function getServerSideProps(ctx) {\n  const {\n    token\n  } = parseCookies(ctx);\n  let user = jwt.decode(token);\n  let user_role = user ? user.u_role : \"\";\n  let user_id = user ? user.u_id : \"\";\n\n  if (!token || user_role === \"u_role\") {\n    const {\n      res\n    } = ctx;\n    res.writeHead(302, {\n      Location: \"/\"\n    });\n    res.end();\n    return {\n      props: {}\n    };\n  } else {\n    let res = await fetch(`http://localhost:3000/api/product/get_data/${user_id}`);\n    let result = await res.json();\n    return {\n      props: {\n        user_role,\n        token,\n        result,\n        user_id\n      }\n    };\n  }\n}","map":null,"metadata":{},"sourceType":"module"}