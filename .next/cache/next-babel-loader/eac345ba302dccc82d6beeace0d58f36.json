{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"E:\\\\Projects\\\\Ecommerce\\\\pages\\\\MyPost\\\\index.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport Sidebar from '../components/SideMenu';\nimport ProductCategory from '../components/CategoryMenu';\nimport Mypost from '../../public/styles/CategoryPro.module.css';\nimport Link from 'next/link';\nimport Card from '@material-ui/core/Card';\nimport CardActionArea from '@material-ui/core/CardActionArea';\nimport CardActions from '@material-ui/core/CardActions';\nimport CardContent from '@material-ui/core/CardContent';\nimport Typography from '@material-ui/core/Typography';\nimport { useState } from 'react';\nimport Pagination from '../components/Pagination';\nimport Head from 'next/head';\n\nfunction index(_ref) {\n  var _this = this;\n\n  var user_role = _ref.user_role,\n      token = _ref.token,\n      result = _ref.result,\n      user_id = _ref.user_id;\n\n  var _useState = new useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      values = _useState2[0],\n      setValues = _useState2[1];\n\n  var changeValueHanler = function changeValueHanler(number) {\n    fetch(\"http://localhost:3000/api/product/get_data/\".concat(user_id, \"/\").concat(number), {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }).then(function (res) {\n      return res.json();\n    }).then(function (data) {\n      setValues(data);\n    })[\"catch\"](function (err) {\n      console.log(err);\n    });\n  };\n\n  var results = values == null ? result : values;\n\n  if (token) {\n    if (user_role === \"Admin\" || user_role === \"root\") {\n      return __jsx(React.Fragment, null, __jsx(Head, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 40,\n          columnNumber: 21\n        }\n      }, __jsx(\"title\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 41,\n          columnNumber: 25\n        }\n      }, \"Product\")), __jsx(\"div\", {\n        className: \"row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 43,\n          columnNumber: 21\n        }\n      }, __jsx(Sidebar, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 44,\n          columnNumber: 25\n        }\n      }), __jsx(\"div\", {\n        className: \"col-lg-9 col-12\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 45,\n          columnNumber: 25\n        }\n      }, __jsx(ProductCategory, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 29\n        }\n      }), __jsx(\"div\", {\n        className: Mypost.shop_maindiv,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 29\n        }\n      }, results.data.length !== 0 ? __jsx(React.Fragment, null, __jsx(\"div\", {\n        className: \"row \".concat(Mypost.card),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 37\n        }\n      }, results.data.map(function (value) {\n        return __jsx(Card, {\n          key: value._id,\n          className: \" mb-3 \".concat(Mypost.shop_card),\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 51,\n            columnNumber: 52\n          }\n        }, __jsx(CardActionArea, {\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 52,\n            columnNumber: 49\n          }\n        }, __jsx(\"div\", {\n          className: \"text-center\",\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 53,\n            columnNumber: 53\n          }\n        }, __jsx(\"img\", {\n          src: \"/images/\".concat(value.p_image),\n          className: \"img-thumbnail\",\n          alt: \"category_photo\",\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 54,\n            columnNumber: 57\n          }\n        })), __jsx(CardContent, {\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 56,\n            columnNumber: 53\n          }\n        }, __jsx(Typography, {\n          gutterBottom: true,\n          variant: \"h5\",\n          component: \"h2\",\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 57,\n            columnNumber: 57\n          }\n        }, \"$\", value.p_name), __jsx(Typography, {\n          gutterBottom: true,\n          variant: \"h6\",\n          component: \"h2\",\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 57\n          }\n        }, \"$\".concat(value.p_price)))), __jsx(CardActions, {\n          className: Mypost.buton,\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 49\n          }\n        }, __jsx(\"a\", {\n          className: Mypost.btn_link,\n          size: \"small\",\n          color: \"primary\",\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 53\n          }\n        }, \" Add to cart \", __jsx(\"i\", {\n          className: \"cart-box fas fa-shopping-cart\",\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 126\n          }\n        })), __jsx(Link, {\n          href: \"/MyPost/\".concat(value._id),\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 53\n          }\n        }, __jsx(\"a\", {\n          className: Mypost.btn_link,\n          size: \"small\",\n          color: \"primary\",\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 57\n          }\n        }, \" See About \", __jsx(\"i\", {\n          className: \"fas fa-arrow-right\",\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 128\n          }\n        })))));\n      })), __jsx(Pagination, {\n        result: results,\n        changeHandler: changeValueHanler,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 37\n        }\n      })) : __jsx(\"div\", {\n        className: Mypost.No_record_div,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 39\n        }\n      }, __jsx(\"h1\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 41\n        }\n      }, \"Not found any product\"))))));\n    }\n  }\n}\n\nexport var __N_SSP = true;\nexport default index;","map":{"version":3,"sources":["E:/Projects/Ecommerce/pages/MyPost/index.js"],"names":["Sidebar","ProductCategory","Mypost","Link","Card","CardActionArea","CardActions","CardContent","Typography","useState","Pagination","Head","index","user_role","token","result","user_id","values","setValues","changeValueHanler","number","fetch","method","headers","then","res","json","data","err","console","log","results","shop_maindiv","length","card","map","value","_id","shop_card","p_image","p_name","p_price","buton","btn_link","No_record_div"],"mappings":"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","sourcesContent":["import Sidebar from '../components/SideMenu';\r\nimport { parseCookies } from 'nookies';\r\nimport ProductCategory from '../components/CategoryMenu'\r\nimport Mypost from '../../public/styles/CategoryPro.module.css';\r\nimport jwt from 'jsonwebtoken';\r\nimport Link from 'next/link';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardActionArea from '@material-ui/core/CardActionArea';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { useState } from 'react'\r\nimport Pagination from '../components/Pagination';\r\nimport Head from 'next/head';\r\n\r\nfunction index({ user_role, token, result, user_id }) {\r\n\r\n    const [values, setValues] = new useState(null);\r\n    const changeValueHanler = (number) => {\r\n        fetch(`http://localhost:3000/api/product/get_data/${user_id}/${number}`, {\r\n            method: 'GET',\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            }\r\n        }).then(res => res.json())\r\n            .then(data => {\r\n                setValues(data);\r\n            })\r\n            .catch(err => {\r\n                console.log(err);\r\n            })\r\n    }\r\n\r\n    let results = (values == null) ? result : values;\r\n\r\n    if (token) {\r\n        if (user_role === \"Admin\" || user_role === \"root\") {\r\n            return (\r\n                <>\r\n                    <Head>\r\n                        <title>Product</title>\r\n                    </Head>\r\n                    <div className=\"row\">\r\n                        <Sidebar />\r\n                        <div className={`col-lg-9 col-12`}>\r\n                            <ProductCategory />\r\n                            <div className={Mypost.shop_maindiv}>\r\n                                {(results.data.length !== 0) ? <>\r\n                                    <div className={`row ${Mypost.card}`}>\r\n                                        {results.data.map(value => {\r\n                                            return <Card key={value._id} className={` mb-3 ${Mypost.shop_card}`}>\r\n                                                <CardActionArea>\r\n                                                    <div className=\"text-center\">\r\n                                                        <img src={`/images/${value.p_image}`} className=\"img-thumbnail\" alt=\"category_photo\" />\r\n                                                    </div>\r\n                                                    <CardContent>\r\n                                                        <Typography gutterBottom variant=\"h5\" component=\"h2\">\r\n                                                            ${value.p_name}\r\n                                                        </Typography>\r\n                                                        <Typography gutterBottom variant=\"h6\" component=\"h2\">\r\n                                                            {`$${value.p_price}`}\r\n                                                        </Typography>\r\n                                                    </CardContent>\r\n                                                </CardActionArea>\r\n                                                <CardActions className={Mypost.buton}>\r\n                                                    <a className={Mypost.btn_link} size=\"small\" color=\"primary\"> Add to cart <i className=\"cart-box fas fa-shopping-cart\"></i></a>\r\n                                                    <Link href={`/MyPost/${value._id}`}>\r\n                                                        <a className={Mypost.btn_link} size=\"small\" color=\"primary\"> See About <i className=\"fas fa-arrow-right\"></i></a>\r\n                                                    </Link>\r\n                                                </CardActions>\r\n                                            </Card>\r\n                                        })}\r\n                                    </div>\r\n                                    <Pagination result={results} changeHandler={changeValueHanler} />\r\n                                </> : <div className={Mypost.No_record_div}>\r\n                                        <h1>Not found any product</h1>\r\n                                    </div>\r\n                                }\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </>\r\n            )\r\n        }\r\n    }\r\n}\r\nexport default index\r\n\r\n\r\nexport async function getServerSideProps(ctx) {\r\n    const { token } = parseCookies(ctx);\r\n    let user = jwt.decode(token);\r\n    let user_role = (user) ? user.u_role : \"\";\r\n    let user_id = (user) ? user.u_id : \"\";\r\n\r\n    if (!token || user_role === \"u_role\") {\r\n        const { res } = ctx\r\n        res.writeHead(302, { Location: \"/\" })\r\n        res.end()\r\n        return {\r\n            props: {}\r\n        }\r\n    } else {\r\n        let res = await fetch(`http://localhost:3000/api/product/get_data/${user_id}`)\r\n        let result = await res.json();\r\n        return {\r\n            props: { user_role, token, result, user_id }\r\n        }\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}