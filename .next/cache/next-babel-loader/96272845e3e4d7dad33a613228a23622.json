{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar _jsxFileName = \"E:\\\\Projects\\\\Ecommerce\\\\pages\\\\Profile\\\\[id].js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport Button from '@material-ui/core/Button';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport TextField from '@material-ui/core/TextField';\nimport Grid from '@material-ui/core/Grid';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Container from '@material-ui/core/Container';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport Head from 'next/head';\nimport { useState } from 'react';\nimport { useRouter } from 'next/router';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    formControl: {\n      margin: theme.spacing(1),\n      width: '96%'\n    },\n    paper: {\n      marginTop: theme.spacing(5),\n      marginBottom: theme.spacing(6),\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: 'center'\n    },\n    form: {\n      width: '100%',\n      // Fix IE 11 issue.\n      marginTop: theme.spacing(3)\n    },\n    submit: {\n      margin: theme.spacing(3, 0, 2)\n    }\n  };\n});\nexport var __N_SSP = true;\nexport default function SignUp(_ref) {\n  _s();\n\n  var token = _ref.token,\n      data = _ref.data,\n      user_role = _ref.user_role,\n      user_id = _ref.user_id;\n  var router = useRouter();\n  var classes = useStyles();\n\n  var _useState = useState({\n    firstName: data.u_fname,\n    lastName: data.u_sname,\n    password: \"\",\n    email: data.u_email,\n    address: data.u_address,\n    user_select: data.u_role,\n    picture: \"\"\n  }),\n      values = _useState[0],\n      setValue = _useState[1];\n\n  var ChangeValue = function ChangeValue(e) {\n    if (e.target.type === 'file') {\n      var key = e.target.name;\n      var val = document.getElementById(\"profile_img\").files[0];\n      setValue(function (preval) {\n        return _objectSpread(_objectSpread({}, preval), {}, _defineProperty({}, key, val));\n      });\n    } else {\n      var _key = e.target.name;\n      var _val = e.target.value;\n      setValue(function (preval) {\n        return _objectSpread(_objectSpread({}, preval), {}, _defineProperty({}, _key, _val));\n      });\n    }\n  };\n\n  var UpdateRecord = function UpdateRecord(e) {\n    e.preventDefault();\n    var form = new FormData();\n    form.append('u_fname', values.firstName);\n    form.append('u_sname', values.lastName);\n    form.append('u_email', values.email);\n    form.append('u_role', values.user_select);\n    form.append('u_address', values.address);\n    form.append('u_password', values.password);\n    form.append('u_image', values.picture);\n    fetch(\"\".concat(process.env.HOST_URL, \"/api/user/updateData/\").concat(user_id), {\n      method: 'PATCH',\n      headers: {\n        'Authorization': \"Bearer \".concat(token)\n      },\n      body: form\n    }).then(function (res) {\n      return res.json();\n    }).then(function (data) {\n      router.push('/Profile');\n    })[\"catch\"](function (err) {\n      console.log(err);\n    });\n  };\n\n  return __jsx(React.Fragment, null, __jsx(Head, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 13\n    }\n  }, __jsx(\"title\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 17\n    }\n  }, \"Update Data\")), __jsx(Container, {\n    \"data-aos\": \"fade-up\",\n    \"data-aos-anchor-placement\": \"center-bottom\",\n    component: \"main\",\n    maxWidth: \"xs\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 13\n    }\n  }, __jsx(CssBaseline, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 17\n    }\n  }), __jsx(\"div\", {\n    className: classes.paper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 17\n    }\n  }, __jsx(Typography, {\n    component: \"h2\",\n    variant: \"h3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 21\n    }\n  }, \"Update Data\"), __jsx(\"form\", {\n    className: classes.form,\n    noValidate: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 21\n    }\n  }, __jsx(Grid, {\n    container: true,\n    spacing: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 25\n    }\n  }, __jsx(Grid, {\n    item: true,\n    xs: 12,\n    sm: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 29\n    }\n  }, __jsx(TextField, {\n    autoComplete: \"fname\",\n    name: \"firstName\",\n    variant: \"outlined\",\n    required: true,\n    fullWidth: true,\n    id: \"firstName\",\n    label: \"First Name\",\n    onChange: ChangeValue,\n    value: values.firstName,\n    autoFocus: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 33\n    }\n  })), __jsx(Grid, {\n    item: true,\n    xs: 12,\n    sm: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 29\n    }\n  }, __jsx(TextField, {\n    variant: \"outlined\",\n    required: true,\n    fullWidth: true,\n    id: \"lastName\",\n    label: \"Last Name\",\n    name: \"lastName\",\n    onChange: ChangeValue,\n    autoComplete: \"lname\",\n    value: values.lastName,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 33\n    }\n  })), __jsx(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 29\n    }\n  }, __jsx(TextField, {\n    variant: \"outlined\",\n    required: true,\n    fullWidth: true,\n    id: \"email\",\n    label: \"Email Address\",\n    name: \"email\",\n    onChange: ChangeValue,\n    autoComplete: \"email\",\n    value: values.email,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 33\n    }\n  })), __jsx(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 29\n    }\n  }, __jsx(TextField, {\n    variant: \"outlined\",\n    required: true,\n    fullWidth: true,\n    name: \"password\",\n    label: \"Password\",\n    type: \"password\",\n    id: \"password\",\n    onChange: ChangeValue,\n    autoComplete: \"current-password\",\n    value: values.password,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 33\n    }\n  })), __jsx(TextField, {\n    variant: \"outlined\",\n    required: true,\n    fullWidth: true,\n    id: \"addressName\",\n    label: \"Enter Address\",\n    name: \"address\",\n    onChange: ChangeValue,\n    autoComplete: \"lname\",\n    value: values.address,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 29\n    }\n  }), user_role === \"root\" ? __jsx(React.Fragment, null, __jsx(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 57\n    }\n  }, __jsx(\"input\", {\n    name: \"picture\",\n    className: \"form-control\",\n    value: values.picture.fileName,\n    type: \"file\",\n    id: \"profile_img\",\n    onChange: ChangeValue,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 33\n    }\n  })), __jsx(Grid, {\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 33\n    }\n  }, __jsx(FormControl, {\n    variant: \"outlined\",\n    className: classes.formControl,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 37\n    }\n  }, __jsx(InputLabel, {\n    id: \"demo-simple-select-outlined-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 41\n    }\n  }, \"Select Role\"), __jsx(Select, {\n    labelId: \"demo-simple-select-outlined-label\",\n    id: \"demo-simple-select-outlined\",\n    label: \"Select Role\",\n    name: \"user_select\",\n    onChange: ChangeValue,\n    value: values.user_select,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 41\n    }\n  }, __jsx(MenuItem, {\n    value: \"User\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 45\n    }\n  }, \"User\"), __jsx(MenuItem, {\n    value: \"Admin\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 45\n    }\n  }, \"Admin\"))))) : null), __jsx(Button, {\n    type: \"submit\",\n    fullWidth: true,\n    variant: \"contained\",\n    color: \"primary\",\n    className: classes.submit,\n    onClick: UpdateRecord,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 25\n    }\n  }, \"Update Data\")))));\n}\n\n_s(SignUp, \"PT+4JokyhmBWKYdq3uZX3fxgwrY=\", false, function () {\n  return [useRouter, useStyles];\n});\n\n_c = SignUp;\n\nvar _c;\n\n$RefreshReg$(_c, \"SignUp\");","map":{"version":3,"sources":["E:/Projects/Ecommerce/pages/Profile/[id].js"],"names":["Button","CssBaseline","TextField","Grid","Typography","makeStyles","Container","FormControl","Select","MenuItem","InputLabel","Head","useState","useRouter","useStyles","theme","formControl","margin","spacing","width","paper","marginTop","marginBottom","display","flexDirection","alignItems","form","submit","SignUp","token","data","user_role","user_id","router","classes","firstName","u_fname","lastName","u_sname","password","email","u_email","address","u_address","user_select","u_role","picture","values","setValue","ChangeValue","e","target","type","key","name","val","document","getElementById","files","preval","value","UpdateRecord","preventDefault","FormData","append","fetch","process","env","HOST_URL","method","headers","body","then","res","json","push","err","console","log","fileName"],"mappings":"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","sourcesContent":["import Button from '@material-ui/core/Button';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Container from '@material-ui/core/Container';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Select from '@material-ui/core/Select';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport Head from 'next/head';\r\nimport { useState } from 'react';\r\nimport { useRouter } from 'next/router';\r\nimport { parseCookies } from 'nookies';\r\nimport jwt from 'jsonwebtoken';\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    formControl: {\r\n        margin: theme.spacing(1),\r\n        width: '96%',\r\n    },\r\n    paper: {\r\n        marginTop: theme.spacing(5),\r\n        marginBottom: theme.spacing(6),\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n    },\r\n    form: {\r\n        width: '100%', // Fix IE 11 issue.\r\n        marginTop: theme.spacing(3),\r\n    },\r\n    submit: {\r\n        margin: theme.spacing(3, 0, 2),\r\n    }\r\n}));\r\n\r\nexport default function SignUp({ token, data, user_role, user_id }) {\r\n\r\n    const router = useRouter()\r\n    const classes = useStyles();\r\n    const [values, setValue] = useState({\r\n        firstName: data.u_fname,\r\n        lastName: data.u_sname,\r\n        password: \"\",\r\n        email: data.u_email,\r\n        address: data.u_address,\r\n        user_select: data.u_role,\r\n        picture: \"\"\r\n    });\r\n\r\n\r\n    const ChangeValue = (e) => {\r\n        if (e.target.type === 'file') {\r\n            let key = e.target.name;\r\n            let val = document.getElementById(\"profile_img\").files[0];\r\n            setValue((preval) => {\r\n                return {\r\n                    ...preval,\r\n                    [key]: val\r\n                }\r\n            })\r\n        } else {\r\n            let key = e.target.name;\r\n            let val = e.target.value;\r\n            setValue((preval) => {\r\n                return {\r\n                    ...preval,\r\n                    [key]: val\r\n                }\r\n            })\r\n        }\r\n    }\r\n\r\n\r\n    const UpdateRecord = (e) => {\r\n        e.preventDefault();\r\n        var form = new FormData();\r\n\r\n        form.append('u_fname', values.firstName);\r\n        form.append('u_sname', values.lastName);\r\n        form.append('u_email', values.email);\r\n        form.append('u_role', values.user_select);\r\n        form.append('u_address', values.address);\r\n        form.append('u_password', values.password);\r\n        form.append('u_image', values.picture);\r\n\r\n        fetch(`${process.env.HOST_URL}/api/user/updateData/${user_id}`, {\r\n            method: 'PATCH',\r\n            headers: {\r\n                'Authorization': `Bearer ${token}`\r\n            },\r\n            body: form\r\n        }).then(res => res.json())\r\n            .then(data => {\r\n                router.push('/Profile');\r\n            }).catch(err => {\r\n                console.log(err);\r\n            })\r\n\r\n\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Head>\r\n                <title>Update Data</title>\r\n            </Head>\r\n            <Container data-aos=\"fade-up\" data-aos-anchor-placement=\"center-bottom\" component=\"main\" maxWidth=\"xs\">\r\n                <CssBaseline />\r\n                <div className={classes.paper}>\r\n                    <Typography component=\"h2\" variant=\"h3\">\r\n                        Update Data\r\n                    </Typography>\r\n                    <form className={classes.form} noValidate>\r\n                        <Grid container spacing={2}>\r\n                            <Grid item xs={12} sm={6}>\r\n                                <TextField\r\n                                    autoComplete=\"fname\"\r\n                                    name=\"firstName\"\r\n                                    variant=\"outlined\"\r\n                                    required\r\n                                    fullWidth\r\n                                    id=\"firstName\"\r\n                                    label=\"First Name\"\r\n                                    onChange={ChangeValue}\r\n                                    value={values.firstName}\r\n                                    autoFocus\r\n                                />\r\n                            </Grid>\r\n                            <Grid item xs={12} sm={6}>\r\n                                <TextField\r\n                                    variant=\"outlined\"\r\n                                    required\r\n                                    fullWidth\r\n                                    id=\"lastName\"\r\n                                    label=\"Last Name\"\r\n                                    name=\"lastName\"\r\n                                    onChange={ChangeValue}\r\n                                    autoComplete=\"lname\"\r\n                                    value={values.lastName}\r\n                                />\r\n                            </Grid>\r\n                            <Grid item xs={12}>\r\n                                <TextField\r\n                                    variant=\"outlined\"\r\n                                    required\r\n                                    fullWidth\r\n                                    id=\"email\"\r\n                                    label=\"Email Address\"\r\n                                    name=\"email\"\r\n                                    onChange={ChangeValue}\r\n                                    autoComplete=\"email\"\r\n                                    value={values.email}\r\n                                />\r\n                            </Grid>\r\n\r\n                            <Grid item xs={12}>\r\n                                <TextField\r\n                                    variant=\"outlined\"\r\n                                    required\r\n                                    fullWidth\r\n                                    name=\"password\"\r\n                                    label=\"Password\"\r\n                                    type=\"password\"\r\n                                    id=\"password\"\r\n                                    onChange={ChangeValue}\r\n                                    autoComplete=\"current-password\"\r\n                                    value={values.password}\r\n                                />\r\n                            </Grid>\r\n\r\n                            <TextField\r\n                                variant=\"outlined\"\r\n                                required\r\n                                fullWidth\r\n                                id=\"addressName\"\r\n                                label=\"Enter Address\"\r\n                                name=\"address\"\r\n                                onChange={ChangeValue}\r\n                                autoComplete=\"lname\"\r\n                                value={values.address}\r\n                            />\r\n\r\n                            {(user_role === \"root\") ? <><Grid item xs={12}>\r\n                                <input name=\"picture\" className={`form-control`} value={values.picture.fileName} type=\"file\" id=\"profile_img\" onChange={ChangeValue} />\r\n                            </Grid>\r\n                                <Grid xs={12}>\r\n                                    <FormControl variant=\"outlined\" className={classes.formControl}>\r\n                                        <InputLabel id=\"demo-simple-select-outlined-label\">Select Role</InputLabel>\r\n                                        <Select\r\n                                            labelId=\"demo-simple-select-outlined-label\"\r\n                                            id=\"demo-simple-select-outlined\"\r\n                                            label=\"Select Role\"\r\n                                            name=\"user_select\"\r\n                                            onChange={ChangeValue}\r\n                                            value={values.user_select}\r\n                                        >\r\n                                            <MenuItem value=\"User\">User</MenuItem>\r\n                                            <MenuItem value=\"Admin\">Admin</MenuItem>\r\n                                        </Select>\r\n                                    </FormControl>\r\n                                </Grid></>\r\n                                : null}\r\n\r\n                        </Grid>\r\n                        <Button\r\n                            type=\"submit\"\r\n                            fullWidth\r\n                            variant=\"contained\"\r\n                            color=\"primary\"\r\n                            className={classes.submit}\r\n                            onClick={UpdateRecord}\r\n                        >\r\n                            Update Data\r\n          </Button>\r\n                    </form>\r\n                </div>\r\n            </Container>\r\n        </>\r\n    );\r\n}\r\n\r\n\r\n\r\nexport async function getServerSideProps(ctx) {\r\n    const { token } = parseCookies(ctx);\r\n    let user = jwt.decode(token);\r\n    let user_role = (user) ? user.u_role : \"\";\r\n    let user_id = ctx.params.id;\r\n    if (!token) {\r\n        const { res } = ctx\r\n        res.writeHead(302, { Location: \"/\" })\r\n        res.end()\r\n        return {\r\n            props: {}\r\n        }\r\n    } else {\r\n        const res = await fetch(`${process.env.HOST_URL}/api/user/getData/${user_id}`, {\r\n            headers: {\r\n                'Authorization': `Bearer ${token}`\r\n            }\r\n        })\r\n        const data = await res.json()\r\n        return {\r\n            props: { token, data, user_role, user_id }\r\n        }\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}