{"ast":null,"code":"import React from \"react\";\nvar __jsx = React.createElement;\nimport SpecificPro from '../../public/styles/specificPro.module.css';\nimport { parseCookies } from 'nookies';\nimport jwt from 'jsonwebtoken';\nimport Link from 'next/link';\nimport { useRouter } from 'next/router';\nimport Head from 'next/head';\nexport default function index({\n  data,\n  user_id,\n  token\n}) {\n  const router = useRouter();\n\n  const DeleteHandler = () => {\n    fetch(`http://localhost:3000/api/product/delete_data/${user_id}`, {\n      method: 'DELETE',\n      headers: {\n        'Authorization': `Bearer ${token}`\n      }\n    }).then(res => res.json()).then(data => {\n      router.push('/MyPost');\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n\n  return __jsx(React.Fragment, null, __jsx(Head, null, __jsx(\"title\", null, \"Product\")), __jsx(\"div\", {\n    className: \"container\"\n  }, __jsx(\"h1\", {\n    class: SpecificPro.heading\n  }, data[0].p_name), __jsx(\"div\", {\n    className: \"row\"\n  }, __jsx(\"div\", {\n    className: `col-md-4 text-center ${SpecificPro.img_div}`\n  }, __jsx(\"img\", {\n    src: `/images/${data[0].p_image}`,\n    className: \"img-thumbnail\",\n    alt: \"product_photo\"\n  })), __jsx(\"div\", {\n    className: \"col-md-8\"\n  }, __jsx(\"p\", {\n    className: SpecificPro.para\n  }, data[0].p_descrip), __jsx(\"h4\", {\n    className: \"my-4\"\n  }, __jsx(\"strong\", null, \"Price : \"), \"$\", data[0].p_price), __jsx(\"div\", {\n    className: `${SpecificPro.button}`\n  }, __jsx(Link, {\n    href: `/ADD_Product/${data[0]._id}`\n  }, __jsx(\"a\", {\n    type: \"button\",\n    className: `btn btn-outline-primary`\n  }, \"Edit \", __jsx(\"i\", {\n    className: \"fas fa-edit\"\n  }))), __jsx(\"button\", {\n    type: \"button\",\n    className: `btn btn-outline-primary`,\n    onClick: DeleteHandler\n  }, \"Delete \", __jsx(\"i\", {\n    className: \"fas fa-trash\"\n  })))))));\n}\nexport async function getServerSideProps(ctx) {\n  const {\n    token\n  } = parseCookies(ctx);\n  let user = jwt.decode(token);\n  let user_role = user ? user.u_role : \"\";\n  let user_id = ctx.params.id;\n\n  if (!token || user_role === \"u_role\") {\n    const {\n      res\n    } = ctx;\n    res.writeHead(302, {\n      Location: \"/\"\n    });\n    res.end();\n    return {\n      props: {}\n    };\n  } else {\n    const res = await fetch(`http://localhost:3000/api/product/specific_data/${user_id}`);\n    const data = await res.json();\n    return {\n      props: {\n        data,\n        user_id,\n        token\n      }\n    };\n  }\n}","map":null,"metadata":{},"sourceType":"module"}