{"ast":null,"code":"var _jsxFileName = \"E:\\\\Projects\\\\Ecommerce\\\\pages\\\\Profile\\\\index.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { parseCookies } from 'nookies';\nimport jwt from 'jsonwebtoken';\nimport Sidebar from '../components/SideMenu';\nimport Profile from '../components/Profiles component/profile';\nimport { useRouter } from 'next/router';\nimport cookie from 'js-cookie';\nimport Head from 'next/head';\nexport default function index({\n  token,\n  data,\n  user_id\n}) {\n  const router = useRouter();\n\n  const DeleteHandler = () => {\n    fetch(`http://localhost:3000/api/user/delteData/${user_id}`, {\n      method: 'DELETE',\n      headers: {\n        'Authorization': `Bearer ${token}`\n      }\n    }).then(res => res.json()).then(data => {\n      router.push('/');\n      cookie.remove('token');\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n\n  return __jsx(React.Fragment, null, __jsx(Head, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 13\n    }\n  }, __jsx(\"title\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 17\n    }\n  }, \"Profile\")), __jsx(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 13\n    }\n  }, __jsx(Sidebar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 17\n    }\n  }), __jsx(Profile, {\n    data: data,\n    token: token,\n    user_id: user_id,\n    DeleteHandler: DeleteHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 17\n    }\n  })));\n}\nexport async function getServerSideProps(ctx) {\n  const {\n    token\n  } = parseCookies(ctx);\n  let user = jwt.decode(token);\n  let user_role = user ? user.u_role : \"\";\n  let user_id = user ? user.u_id : \"\";\n\n  if (!token || user_role === \"User\") {\n    const {\n      res\n    } = ctx;\n    res.writeHead(302, {\n      Location: \"/\"\n    });\n    res.end();\n    return {\n      props: {}\n    };\n  } else {\n    let res = await fetch(`http://localhost:3000/api/user/getData/${user_id}`, {\n      headers: {\n        'Authorization': `Bearer ${token}`\n      }\n    });\n    let data = await res.json();\n    return {\n      props: {\n        token,\n        data,\n        user_id\n      }\n    };\n  }\n}","map":{"version":3,"sources":["E:/Projects/Ecommerce/pages/Profile/index.js"],"names":["parseCookies","jwt","Sidebar","Profile","useRouter","cookie","Head","index","token","data","user_id","router","DeleteHandler","fetch","method","headers","then","res","json","push","remove","catch","err","console","log","getServerSideProps","ctx","user","decode","user_role","u_role","u_id","writeHead","Location","end","props"],"mappings":";;;AAAA,SAASA,YAAT,QAA6B,SAA7B;AACA,OAAOC,GAAP,MAAgB,cAAhB;AACA,OAAOC,OAAP,MAAoB,wBAApB;AACA,OAAOC,OAAP,MAAoB,0CAApB;AACA,SAASC,SAAT,QAA0B,aAA1B;AACA,OAAOC,MAAP,MAAmB,WAAnB;AACA,OAAOC,IAAP,MAAiB,WAAjB;AAEA,eAAe,SAASC,KAAT,CAAe;AAAEC,EAAAA,KAAF;AAASC,EAAAA,IAAT;AAAeC,EAAAA;AAAf,CAAf,EAAyC;AAEpD,QAAMC,MAAM,GAAGP,SAAS,EAAxB;;AAEA,QAAMQ,aAAa,GAAG,MAAM;AAExBC,IAAAA,KAAK,CAAE,4CAA2CH,OAAQ,EAArD,EAAwD;AACzDI,MAAAA,MAAM,EAAE,QADiD;AAEzDC,MAAAA,OAAO,EAAE;AACL,yBAAkB,UAASP,KAAM;AAD5B;AAFgD,KAAxD,CAAL,CAKGQ,IALH,CAKQC,GAAG,IAAIA,GAAG,CAACC,IAAJ,EALf,EAMKF,IANL,CAMUP,IAAI,IAAI;AACVE,MAAAA,MAAM,CAACQ,IAAP,CAAY,GAAZ;AACAd,MAAAA,MAAM,CAACe,MAAP,CAAc,OAAd;AACH,KATL,EAUKC,KAVL,CAUWC,GAAG,IAAI;AACVC,MAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACH,KAZL;AAaH,GAfD;;AAkBA,SACI,4BACI,MAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADJ,CADJ,EAII;AAAK,IAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,MAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,EAEI,MAAC,OAAD;AAAS,IAAA,IAAI,EAAEb,IAAf;AAAqB,IAAA,KAAK,EAAED,KAA5B;AAAmC,IAAA,OAAO,EAAEE,OAA5C;AAAqD,IAAA,aAAa,EAAEE,aAApE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFJ,CAJJ,CADJ;AAWH;AAGD,OAAO,eAAea,kBAAf,CAAkCC,GAAlC,EAAuC;AAC1C,QAAM;AAAElB,IAAAA;AAAF,MAAYR,YAAY,CAAC0B,GAAD,CAA9B;AACA,MAAIC,IAAI,GAAG1B,GAAG,CAAC2B,MAAJ,CAAWpB,KAAX,CAAX;AACA,MAAIqB,SAAS,GAAIF,IAAD,GAASA,IAAI,CAACG,MAAd,GAAuB,EAAvC;AACA,MAAIpB,OAAO,GAAIiB,IAAD,GAASA,IAAI,CAACI,IAAd,GAAqB,EAAnC;;AAEA,MAAI,CAACvB,KAAD,IAAUqB,SAAS,KAAK,MAA5B,EAAoC;AAChC,UAAM;AAAEZ,MAAAA;AAAF,QAAUS,GAAhB;AACAT,IAAAA,GAAG,CAACe,SAAJ,CAAc,GAAd,EAAmB;AAAEC,MAAAA,QAAQ,EAAE;AAAZ,KAAnB;AACAhB,IAAAA,GAAG,CAACiB,GAAJ;AACA,WAAO;AACHC,MAAAA,KAAK,EAAE;AADJ,KAAP;AAGH,GAPD,MAOO;AACH,QAAIlB,GAAG,GAAG,MAAMJ,KAAK,CAAE,0CAAyCH,OAAQ,EAAnD,EAAsD;AACvEK,MAAAA,OAAO,EAAE;AACL,yBAAkB,UAASP,KAAM;AAD5B;AAD8D,KAAtD,CAArB;AAKA,QAAIC,IAAI,GAAG,MAAMQ,GAAG,CAACC,IAAJ,EAAjB;AACA,WAAO;AACHiB,MAAAA,KAAK,EAAE;AAAE3B,QAAAA,KAAF;AAASC,QAAAA,IAAT;AAAeC,QAAAA;AAAf;AADJ,KAAP;AAGH;AACJ","sourcesContent":["import { parseCookies } from 'nookies';\r\nimport jwt from 'jsonwebtoken';\r\nimport Sidebar from '../components/SideMenu';\r\nimport Profile from '../components/Profiles component/profile';\r\nimport { useRouter } from 'next/router';\r\nimport cookie from 'js-cookie';\r\nimport Head from 'next/head';\r\n\r\nexport default function index({ token, data, user_id }) {\r\n\r\n    const router = useRouter();\r\n\r\n    const DeleteHandler = () => {\r\n\r\n        fetch(`http://localhost:3000/api/user/delteData/${user_id}`, {\r\n            method: 'DELETE',\r\n            headers: {\r\n                'Authorization': `Bearer ${token}`\r\n            }\r\n        }).then(res => res.json())\r\n            .then(data => {\r\n                router.push('/')\r\n                cookie.remove('token')\r\n            })\r\n            .catch(err => {\r\n                console.log(err);\r\n            })\r\n    }\r\n\r\n\r\n    return (\r\n        <>\r\n            <Head>\r\n                <title>Profile</title>\r\n            </Head>\r\n            <div className=\"row\">\r\n                <Sidebar />\r\n                <Profile data={data} token={token} user_id={user_id} DeleteHandler={DeleteHandler} />\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\n\r\nexport async function getServerSideProps(ctx) {\r\n    const { token } = parseCookies(ctx);\r\n    let user = jwt.decode(token);\r\n    let user_role = (user) ? user.u_role : \"\";\r\n    let user_id = (user) ? user.u_id : \"\";\r\n\r\n    if (!token || user_role === \"User\") {\r\n        const { res } = ctx\r\n        res.writeHead(302, { Location: \"/\" })\r\n        res.end()\r\n        return {\r\n            props: {}\r\n        }\r\n    } else {\r\n        let res = await fetch(`http://localhost:3000/api/user/getData/${user_id}`, {\r\n            headers: {\r\n                'Authorization': `Bearer ${token}`\r\n            }\r\n        })\r\n        let data = await res.json();\r\n        return {\r\n            props: { token, data, user_id }\r\n        }\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}