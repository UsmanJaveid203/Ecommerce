{"ast":null,"code":"var _jsxFileName = \"E:\\\\Projects\\\\Ecommerce\\\\pages\\\\Profile\\\\index.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport Sidebar from '../components/SideMenu';\nimport Profile from '../components/Profiles component/profile';\nimport { useRouter } from 'next/router';\nimport cookie from 'js-cookie';\nimport Head from 'next/head';\nexport var __N_SSP = true;\nexport default function index(_ref) {\n  _s();\n\n  var token = _ref.token,\n      data = _ref.data,\n      user_id = _ref.user_id;\n  var router = useRouter();\n\n  var DeleteHandler = function DeleteHandler() {\n    fetch(\"http://localhost:3000/api/user/delteData/\".concat(user_id), {\n      method: 'DELETE',\n      headers: {\n        'Authorization': \"Bearer \".concat(token)\n      }\n    }).then(function (res) {\n      return res.json();\n    }).then(function (data) {\n      router.push('/');\n      cookie.remove('token');\n    })[\"catch\"](function (err) {\n      console.log(err);\n    });\n  };\n\n  return __jsx(React.Fragment, null, __jsx(Head, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 13\n    }\n  }, __jsx(\"title\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 17\n    }\n  }, \"Profile\")), __jsx(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 13\n    }\n  }, __jsx(Sidebar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 17\n    }\n  }), __jsx(Profile, {\n    data: data,\n    token: token,\n    user_id: user_id,\n    DeleteHandler: DeleteHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 17\n    }\n  })));\n}\n\n_s(index, \"fN7XvhJ+p5oE6+Xlo0NJmXpxjC8=\", false, function () {\n  return [useRouter];\n});","map":{"version":3,"sources":["E:/Projects/Ecommerce/pages/Profile/index.js"],"names":["Sidebar","Profile","useRouter","cookie","Head","index","token","data","user_id","router","DeleteHandler","fetch","method","headers","then","res","json","push","remove","err","console","log"],"mappings":";;;;;AAEA,OAAOA,OAAP,MAAoB,wBAApB;AACA,OAAOC,OAAP,MAAoB,0CAApB;AACA,SAASC,SAAT,QAA0B,aAA1B;AACA,OAAOC,MAAP,MAAmB,WAAnB;AACA,OAAOC,IAAP,MAAiB,WAAjB;;AAEA,eAAe,SAASC,KAAT,OAAyC;AAAA;;AAAA,MAAxBC,KAAwB,QAAxBA,KAAwB;AAAA,MAAjBC,IAAiB,QAAjBA,IAAiB;AAAA,MAAXC,OAAW,QAAXA,OAAW;AAEpD,MAAMC,MAAM,GAAGP,SAAS,EAAxB;;AAEA,MAAMQ,aAAa,GAAG,SAAhBA,aAAgB,GAAM;AAExBC,IAAAA,KAAK,oDAA6CH,OAA7C,GAAwD;AACzDI,MAAAA,MAAM,EAAE,QADiD;AAEzDC,MAAAA,OAAO,EAAE;AACL,0CAA2BP,KAA3B;AADK;AAFgD,KAAxD,CAAL,CAKGQ,IALH,CAKQ,UAAAC,GAAG;AAAA,aAAIA,GAAG,CAACC,IAAJ,EAAJ;AAAA,KALX,EAMKF,IANL,CAMU,UAAAP,IAAI,EAAI;AACVE,MAAAA,MAAM,CAACQ,IAAP,CAAY,GAAZ;AACAd,MAAAA,MAAM,CAACe,MAAP,CAAc,OAAd;AACH,KATL,WAUW,UAAAC,GAAG,EAAI;AACVC,MAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACH,KAZL;AAaH,GAfD;;AAkBA,SACI,4BACI,MAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADJ,CADJ,EAII;AAAK,IAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,MAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,EAEI,MAAC,OAAD;AAAS,IAAA,IAAI,EAAEZ,IAAf;AAAqB,IAAA,KAAK,EAAED,KAA5B;AAAmC,IAAA,OAAO,EAAEE,OAA5C;AAAqD,IAAA,aAAa,EAAEE,aAApE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFJ,CAJJ,CADJ;AAWH;;GAjCuBL,K;UAELH,S","sourcesContent":["import { parseCookies } from 'nookies';\r\nimport jwt from 'jsonwebtoken';\r\nimport Sidebar from '../components/SideMenu';\r\nimport Profile from '../components/Profiles component/profile';\r\nimport { useRouter } from 'next/router';\r\nimport cookie from 'js-cookie';\r\nimport Head from 'next/head';\r\n\r\nexport default function index({ token, data, user_id }) {\r\n\r\n    const router = useRouter();\r\n\r\n    const DeleteHandler = () => {\r\n\r\n        fetch(`http://localhost:3000/api/user/delteData/${user_id}`, {\r\n            method: 'DELETE',\r\n            headers: {\r\n                'Authorization': `Bearer ${token}`\r\n            }\r\n        }).then(res => res.json())\r\n            .then(data => {\r\n                router.push('/')\r\n                cookie.remove('token')\r\n            })\r\n            .catch(err => {\r\n                console.log(err);\r\n            })\r\n    }\r\n\r\n\r\n    return (\r\n        <>\r\n            <Head>\r\n                <title>Profile</title>\r\n            </Head>\r\n            <div className=\"row\">\r\n                <Sidebar />\r\n                <Profile data={data} token={token} user_id={user_id} DeleteHandler={DeleteHandler} />\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\n\r\nexport async function getServerSideProps(ctx) {\r\n    const { token } = parseCookies(ctx);\r\n    let user = jwt.decode(token);\r\n    let user_role = (user) ? user.u_role : \"\";\r\n    let user_id = (user) ? user.u_id : \"\";\r\n\r\n    if (!token || user_role === \"User\") {\r\n        const { res } = ctx\r\n        res.writeHead(302, { Location: \"/\" })\r\n        res.end()\r\n        return {\r\n            props: {}\r\n        }\r\n    } else {\r\n        let res = await fetch(`http://localhost:3000/api/user/getData/${user_id}`, {\r\n            headers: {\r\n                'Authorization': `Bearer ${token}`\r\n            }\r\n        })\r\n        let data = await res.json();\r\n        return {\r\n            props: { token, data, user_id }\r\n        }\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}